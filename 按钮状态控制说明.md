# æŒ‰é’®çŠ¶æ€æ§åˆ¶è¯´æ˜?

## é—®é¢˜æè¿°

å®¡æ ¸æŒ‰é’®åœ¨ç‚¹å‡»åä¼šæ˜¾ç¤?å®¡æ ¸ä¸?ï¼Œä½†2ç§’åå°±æ¢å¤æˆ"å¼€å§‹å®¡æ ?ï¼Œè€Œå®é™…å®¡æ ¸è¿˜åœ¨è¿›è¡Œä¸­ã€?

## åŸå› åˆ†æ

ä¹‹å‰çš„å®ç°ä½¿ç”¨å›ºå®šçš„2ç§’å»¶è¿Ÿæ¥æ¢å¤æŒ‰é’®ï¼?
```javascript
setTimeout(() => {
    reviewBtn.disabled = false;
    reviewBtn.textContent = 'å¼€å§‹å®¡æ ?;
}, 2000);
```

ä½†å®¡æ ¸é€šå¸¸éœ€è¦æ›´é•¿æ—¶é—´ï¼ˆå‡ åç§’ç”šè‡³å‡ åˆ†é’Ÿï¼‰ï¼Œæ‰€ä»¥æŒ‰é’®è¿‡æ—©æ¢å¤äº†ã€?

## è§£å†³æ–¹æ¡ˆ

é€šè¿‡SSEæ¶ˆæ¯æ¥æ§åˆ¶æŒ‰é’®çŠ¶æ€ï¼Œè€Œä¸æ˜¯å›ºå®šå»¶è¿Ÿã€?

### 1. åœ¨logå‡½æ•°ä¸­ç›‘å¬å®Œæˆæ¶ˆæ?

```javascript
function log(message) {
    const logArea = document.getElementById('logArea');
    const timestamp = new Date().toLocaleTimeString();
    logArea.textContent += `[${timestamp}] ${message}\n`;
    logArea.scrollTop = logArea.scrollHeight;
    
    // æ£€æŸ¥æ˜¯å¦æ˜¯å®¡æ ¸å®Œæˆçš„æ¶ˆæ?
    if (message.includes('æ‰€æœ‰æ–‡ä»¶å®¡æ ¸å®Œæˆ?)) {
        const reviewBtn = document.getElementById('reviewBtn');
        if (reviewBtn) {
            reviewBtn.disabled = false;
            reviewBtn.textContent = 'å¼€å§‹å®¡æ ?;
        }
    }
}
```

### 2. ä¿®æ”¹startReviewå‡½æ•°

```javascript
async function startReview() {
    const reviewBtn = document.getElementById('reviewBtn');
    reviewBtn.disabled = true;
    reviewBtn.innerHTML = '<span class="loading"></span> å®¡æ ¸ä¸?..';
    
    try {
        const response = await fetch('/api/review', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ ... })
        });
        
        const data = await response.json();
        if (data.error) {
            log('â?' + data.error);
            // å‡ºé”™æ—¶ç«‹å³æ¢å¤æŒ‰é’?
            reviewBtn.disabled = false;
            reviewBtn.textContent = 'å¼€å§‹å®¡æ ?;
        }
        // æˆåŠŸæ—¶ä¸æ¢å¤æŒ‰é’®ï¼Œç­‰å¾…SSEæ¶ˆæ¯
    } catch (error) {
        log('â?è¯·æ±‚å¤±è´¥: ' + error.message);
        // å‡ºé”™æ—¶ç«‹å³æ¢å¤æŒ‰é’?
        reviewBtn.disabled = false;
        reviewBtn.textContent = 'å¼€å§‹å®¡æ ?;
    }
}
```

## å·¥ä½œæµç¨‹

### æ­£å¸¸æµç¨‹

1. **ç”¨æˆ·ç‚¹å‡»"å¼€å§‹å®¡æ ?**
   ```
   æŒ‰é’®çŠ¶æ€? ç¦ç”¨ + "å®¡æ ¸ä¸?.."
   ```

2. **å‘é€å®¡æ ¸è¯·æ±?*
   ```
   POST /api/review
   å“åº”: { "success": true, "message": "å®¡æ ¸å·²å¼€å§? }
   ```

3. **å®¡æ ¸åœ¨åå°è¿›è¡Œï¼ŒSSEå®æ—¶å‘é€æ—¥å¿?*
   ```
   [14:30:15] å¼€å§‹å®¡æ ?2 ä¸ªæ–‡ä»?..
   [14:30:16] [1/2] æ­£åœ¨å®¡æ ¸: src/Main.java
   [14:30:20]   âœ?å®¡æ ¸å®Œæˆ
   [14:30:21] [2/2] æ­£åœ¨å®¡æ ¸: src/Utils.java
   [14:30:25]   âœ?å®¡æ ¸å®Œæˆ
   [14:30:26] æ­£åœ¨ç”ŸæˆHTMLæŠ¥å‘Š...
   [14:30:27] âœ?æŠ¥å‘Šå·²ç”Ÿæˆ?
   [14:30:27] æ‰€æœ‰æ–‡ä»¶å®¡æ ¸å®Œæˆï¼  â†?è§¦å‘æŒ‰é’®æ¢å¤
   ```

4. **æ”¶åˆ°"æ‰€æœ‰æ–‡ä»¶å®¡æ ¸å®Œæˆ?æ¶ˆæ¯**
   ```
   æŒ‰é’®çŠ¶æ€? å¯ç”¨ + "å¼€å§‹å®¡æ ?
   ```

### é”™è¯¯æµç¨‹

1. **ç”¨æˆ·ç‚¹å‡»"å¼€å§‹å®¡æ ?**
   ```
   æŒ‰é’®çŠ¶æ€? ç¦ç”¨ + "å®¡æ ¸ä¸?.."
   ```

2. **å‘é€å®¡æ ¸è¯·æ±‚å¤±è´?*
   ```
   POST /api/review
   å“åº”: { "error": "é…ç½®æ–‡ä»¶æœªåŠ è½? }
   ```

3. **ç«‹å³æ¢å¤æŒ‰é’®**
   ```
   æŒ‰é’®çŠ¶æ€? å¯ç”¨ + "å¼€å§‹å®¡æ ?
   ```

## ä¼˜åŠ¿

### 1. å‡†ç¡®çš„çŠ¶æ€æ§åˆ?
- âœ?æŒ‰é’®çŠ¶æ€ä¸å®é™…å®¡æ ¸çŠ¶æ€åŒæ­?
- âœ?ä¸ä¼šè¿‡æ—©æ¢å¤
- âœ?ä¸ä¼šä¸€ç›´ç¦ç”?

### 2. æ›´å¥½çš„ç”¨æˆ·ä½“éª?
- âœ?ç”¨æˆ·çŸ¥é“å®¡æ ¸æ­£åœ¨è¿›è¡Œ
- âœ?ç”¨æˆ·çŸ¥é“ä½•æ—¶å¯ä»¥å†æ¬¡å®¡æ ¸
- âœ?æ¸…æ™°çš„çŠ¶æ€åé¦?

### 3. é”™è¯¯å¤„ç†
- âœ?å‡ºé”™æ—¶ç«‹å³æ¢å¤æŒ‰é’?
- âœ?ç”¨æˆ·å¯ä»¥é‡è¯•
- âœ?ä¸ä¼šå¡ä½ç•Œé¢

## å…³é”®æ¶ˆæ¯

åç«¯å‘é€çš„å…³é”®æ¶ˆæ¯ï¼?
```go
s.sendLog("æ‰€æœ‰æ–‡ä»¶å®¡æ ¸å®Œæˆï¼")
```

å‰ç«¯ç›‘å¬çš„å…³é”®å­—ï¼?
```javascript
if (message.includes('æ‰€æœ‰æ–‡ä»¶å®¡æ ¸å®Œæˆ?))
```

## é€‚ç”¨åœºæ™¯

### æœ¬åœ°æ¨¡å¼
- âœ?å·²å®ç?
- âœ?ç›‘å¬"æ‰€æœ‰æ–‡ä»¶å®¡æ ¸å®Œæˆ?

### åœ¨çº¿æ¨¡å¼
- âœ?å·²å®ç?
- âœ?ç›‘å¬"æ‰€æœ‰æ–‡ä»¶å®¡æ ¸å®Œæˆ?

## æµ‹è¯•æ­¥éª¤

### 1. æ­£å¸¸å®¡æ ¸
1. ç‚¹å‡»"å¼€å§‹å®¡æ ?
2. è§‚å¯ŸæŒ‰é’®å˜ä¸º"å®¡æ ¸ä¸?.."ä¸”ç¦ç”?
3. è§‚å¯Ÿæ—¥å¿—å®æ—¶æ›´æ–°
4. ç­‰å¾…å®¡æ ¸å®Œæˆ
5. è§‚å¯ŸæŒ‰é’®æ¢å¤ä¸?å¼€å§‹å®¡æ ?ä¸”å¯ç”?

### 2. é”™è¯¯å¤„ç†
1. ä¸åŠ è½½é…ç½®æ–‡ä»?
2. ç‚¹å‡»"å¼€å§‹å®¡æ ?
3. è§‚å¯ŸæŒ‰é’®å˜ä¸º"å®¡æ ¸ä¸?.."
4. æ”¶åˆ°é”™è¯¯æ¶ˆæ¯
5. è§‚å¯ŸæŒ‰é’®ç«‹å³æ¢å¤

### 3. é•¿æ—¶é—´å®¡æ ?
1. é€‰æ‹©å¤šä¸ªæ–‡ä»¶
2. ç‚¹å‡»"å¼€å§‹å®¡æ ?
3. è§‚å¯ŸæŒ‰é’®ä¿æŒ"å®¡æ ¸ä¸?.."çŠ¶æ€?
4. ç­‰å¾…æ‰€æœ‰æ–‡ä»¶å®¡æ ¸å®Œæˆï¼ˆå¯èƒ½å‡ åˆ†é’Ÿï¼‰
5. è§‚å¯ŸæŒ‰é’®åœ¨æ”¶åˆ°å®Œæˆæ¶ˆæ¯åæ¢å¤

## æ³¨æ„äº‹é¡¹

### 1. æ¶ˆæ¯æ ¼å¼
ç¡®ä¿åç«¯å‘é€çš„æ¶ˆæ¯åŒ…å«"æ‰€æœ‰æ–‡ä»¶å®¡æ ¸å®Œæˆ?æ–‡æœ¬ï¼?
```go
s.sendLog("æ‰€æœ‰æ–‡ä»¶å®¡æ ¸å®Œæˆï¼")
```

### 2. é”™è¯¯æ¢å¤
æ‰€æœ‰é”™è¯¯æƒ…å†µéƒ½è¦æ¢å¤æŒ‰é’®ï¼š
```javascript
if (data.error) {
    reviewBtn.disabled = false;
    reviewBtn.textContent = 'å¼€å§‹å®¡æ ?;
}
```

### 3. ç½‘ç»œé—®é¢˜
å¦‚æœSSEè¿æ¥æ–­å¼€ï¼ŒæŒ‰é’®å¯èƒ½ä¸ä¼šæ¢å¤ã€‚å¯ä»¥è€ƒè™‘æ·»åŠ è¶…æ—¶æœºåˆ¶ï¼?
```javascript
// å¯é€‰ï¼šæ·»åŠ è¶…æ—¶ä¿æŠ¤ï¼ˆä¾‹å¦?0åˆ†é’Ÿï¼?
setTimeout(() => {
    if (reviewBtn.disabled) {
        reviewBtn.disabled = false;
        reviewBtn.textContent = 'å¼€å§‹å®¡æ ?;
        log('âš ï¸ å®¡æ ¸è¶…æ—¶ï¼Œè¯·æ£€æŸ¥æ—¥å¿?);
    }
}, 600000); // 10åˆ†é’Ÿ
```

## æ€»ç»“

é€šè¿‡SSEæ¶ˆæ¯æ§åˆ¶æŒ‰é’®çŠ¶æ€ï¼š
- âœ?ç‚¹å‡»æ—¶ï¼šç¦ç”¨æŒ‰é’®ï¼Œæ˜¾ç¤?å®¡æ ¸ä¸?.."
- âœ?å®¡æ ¸ä¸­ï¼šä¿æŒç¦ç”¨çŠ¶æ€?
- âœ?å®Œæˆæ—¶ï¼šæ”¶åˆ°SSEæ¶ˆæ¯åæ¢å¤æŒ‰é’?
- âœ?å‡ºé”™æ—¶ï¼šç«‹å³æ¢å¤æŒ‰é’®

è¿™æ ·ç¡®ä¿æŒ‰é’®çŠ¶æ€ä¸å®é™…å®¡æ ¸çŠ¶æ€å®Œå…¨åŒæ­¥ã€?

---

**ç‰ˆæœ¬**: 1.4.1  
**æ›´æ–°æ—¥æœŸ**: 2024-01-15  
**çŠ¶æ€?*: âœ?å·²ä¿®å¤?
