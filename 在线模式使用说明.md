# SVN 在线审核模式使用说明

## 功能概述

在线审核模式允许你直接连接到SVN服务器，搜索和审核历史版本的代码变更，而不需要本地工作副本?

## 使用方法

### CLI 命令行模?

#### 1. 基本用法

```bash
# 使用在线模式审核
svn-ai-reviewer review online --url https://svn.example.com/repo --username your_name --password your_pass

# 保存凭据以便下次使用
svn-ai-reviewer review online --url https://svn.example.com/repo --username your_name --password your_pass --save

# 使用保存的凭据（从config.yaml读取?
svn-ai-reviewer review online

# 搜索特定路径
svn-ai-reviewer review online --path /trunk/src

# 搜索特定作者的提交
svn-ai-reviewer review online --author zhangsan

# 搜索包含关键词的提交
svn-ai-reviewer review online --keyword "bug fix"

# 组合搜索
svn-ai-reviewer review online --path /trunk --author zhangsan --keyword "feature"
```

#### 2. 交互式流?

运行命令后，系统会：
1. 连接到SVN服务?
2. 显示搜索到的提交记录列表（默认前100条）
3. 提示你选择要审核的版本（输入编号，用逗号分隔?
4. 显示选中版本的文件列?
5. 提示你选择要审核的文件
6. 执行AI审核并生成报?

### GUI 图形界面模式

#### 1. 启动方式

```bash
# 启动GUI服务?
svn-ai-reviewer

# 在浏览器中访?
http://localhost:8080/online
```

或者在本地模式界面点击"在线模式"按钮切换?

#### 2. 使用步骤

**步骤1：加载配?*
- 输入配置文件路径（默?config.yaml?
- 点击"加载配置"按钮

**步骤2：连接SVN服务?*
- 输入SVN服务器地址
  - 远程服务器：https://svn.example.com/repo
  - 本地仓库：file:///F:/02demo/myrepo/trunk
- 输入用户名和密码（本地file://协议可留空）
- 勾?记住配置"可以保存到浏览器本地存储
- 点击"连接服务?按钮

**步骤3：搜索提交记?*
- 输入搜索条件?
  - 目录路径：指定要搜索的目录（留空表示根目录）
  - 关键词：搜索提交信息中包含的关键?
  - 作者：搜索特定作者的提交
- 点击"搜索"按钮
- 系统会显示前100条匹配的提交记录

**步骤4：选择版本**
- 在提交记录列表中勾选要审核的版?
- 可以选择多个版本
- 点击"加载选中版本的文?按钮

**步骤5：选择文件**
- 系统会显示所有选中版本的变更文?
- 默认全选，可以取消勾选不需要审核的文件
- 每个文件会显示版本号、状态和路径

**步骤6：开始审?*
- 点击"开始审?按钮
- 系统会逐个审核选中的文?
- 审核完成后自动生成HTML报告

## 配置文件

?`config.yaml` 中添加在线模式配置：

```yaml
ai:
  provider: "deepseek"
  api_key: "your-api-key"
  base_url: "https://api.deepseek.com/v1"
  model: "deepseek-chat"
  temperature: 0.3
  max_tokens: 2000

review_prompt: |
  你是一个专业的代码审核专家...

svn:
  command: "svn"

# 在线模式配置（可选，保存凭据后自动填充）
online:
  url: "https://svn.example.com/repo"
  username: "your_username"
  password: "your_password"

report:
  output_dir: "./reports"
  auto_open: true
```

## 功能特点

### 1. 凭据管理
- **CLI模式**：使?`--save` 参数保存?config.yaml
- **GUI模式**：勾?记住凭据"保存到浏览器本地存储
- 下次使用时自动加载，无需重复输入

### 2. 灵活搜索
- 支持按目录路径搜?
- 支持按关键词搜索提交信息
- 支持按作者搜?
- 支持组合搜索条件
- 默认返回?00条记?

### 3. 批量审核
- 可以选择多个版本
- 可以选择多个文件
- 一次性审核所有选中的文?

### 4. 分页浏览
- 支持查看?00??00条记录（类似TortoiseSVN?
- 保持搜索条件不变

### 5. 审核报告
- 与本地模式使用相同的报告格式
- 报告中包含版本号信息
- 自动打开浏览器查看报?

## 常见问题

### Q: 如何查看更多历史记录?
A: 使用"?00???00?按钮浏览更多记录?

### Q: 配置保存在哪里？
A: CLI模式保存在config.yaml，GUI模式保存在浏览器localStorage?

### Q: 本地file://协议需要用户名密码吗？
A: 不需要。本地SVN仓库（file://协议）不需要认证，用户名和密码可以留空?

### Q: 可以审核多个版本吗？
A: 可以，在提交记录列表中勾选多个版本，然后加载文件?

### Q: 连接超时怎么办？
A: 检查网络连接和SVN服务器地址是否正确，确保有访问权限?

### Q: 支持哪些SVN协议?
A: 支持 http://, https://, svn:// 等所有SVN标准协议?

## 注意事项

1. 确保SVN命令行工具已安装
2. 确保有SVN服务器的访问权限
3. 大型仓库搜索可能需要较长时?
4. 审核大量文件时请耐心等待
5. 密码以明文形式保存，请注意安?

## 示例场景

### 场景1：审核同事的最近提?
```bash
svn-ai-reviewer review online --author zhangsan
# 选择最近的几个版本进行审核
```

### 场景2：审核特定功能的代码
```bash
svn-ai-reviewer review online --keyword "用户登录" --path /trunk/src/auth
# 搜索包含"用户登录"关键词的提交
```

### 场景3：审核历史bug修复
```bash
svn-ai-reviewer review online --keyword "bug" --author lisi
# 搜索lisi提交的包?bug"的记?
```

## 技术实?

- 使用SVN命令行工具的XML输出格式
- 支持SVN log、diff等命?
- 完全复用本地模式的审核逻辑
- 报告格式与本地模式一?


## 本地SVN仓库支持

### 使用本地file://协议

本地SVN仓库（file://协议）不需要用户名和密码认证?

#### CLI示例
```bash
# 连接本地仓库
svn-ai-reviewer review online --url file:///F:/02demo/myrepo/trunk --save

# 后续使用
svn-ai-reviewer review online --keyword "bug"
```

#### GUI示例
1. 在SVN服务器地址输入：`file:///F:/02demo/myrepo/trunk`
2. 用户名和密码留空
3. 点击"连接服务?

### 本地仓库路径格式

**Windows:**
```
file:///C:/path/to/repo
file:///F:/02demo/myrepo/trunk
```

**Linux/Mac:**
```
file:///home/user/repo
file:///var/svn/myrepo/trunk
```

### 注意事项

1. file://协议使用三个斜杠 `///`
2. Windows路径使用正斜?`/` 而不是反斜杠 `\`
3. 不需要提供用户名和密?
4. 确保对本地仓库有读取权限
