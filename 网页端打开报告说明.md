# 网页端打开报告功能说明

## 修改内容

在线模式和本地模式下，生成审核报告后，通过 HTTP 服务提供报告访问，并在网页端自动打开报告。

## 实现方式

### 后端修改 (gui/server.go)

1. **静态文件服务**
   - 添加了 `/reports/` 路由，将 `reports` 目录作为静态文件服务
   - 使用 `http.FileServer` 提供报告文件的 HTTP 访问
   - 报告可通过 `http://localhost:8080/reports/文件名.html` 访问

2. **本地模式** (`handleReview` 函数)
   - 生成报告后，提取报告文件名
   - 通过 SSE 日志流发送 HTTP URL：`REPORT_URL:http://localhost:8080/reports/文件名.html`
   - 移除了服务器端的 `report.OpenInBrowser()` 调用

3. **在线模式** (`handleOnlineReview` 函数)
   - 同样的实现方式
   - 生成报告后发送 HTTP URL 到前端

### 前端修改

1. **本地模式** (gui/templates/index.html)
   - 在 `log()` 函数中添加了对 `REPORT_URL:` 消息的检测
   - 当收到报告URL时，使用 `window.open(reportURL, '_blank')` 在新标签页打开

2. **在线模式** (gui/templates/online.html)
   - 同样的实现方式

## 使用效果

- 审核完成后，报告会自动在浏览器的新标签页中打开
- 报告通过 HTTP 协议访问，不受浏览器本地文件访问限制
- 可以在任何设备上通过网络访问报告（如果服务器可访问）
- 更符合 Web 应用的架构和使用习惯
- 支持跨平台（Windows、Linux、macOS）

## 技术细节

- 使用 SSE (Server-Sent Events) 实时推送报告URL
- 报告URL格式：`http://localhost:8080/reports/report-20250101-120000.html`
- 前端通过检测特殊前缀 `REPORT_URL:` 来识别报告URL消息
- 静态文件服务使用 Go 标准库的 `http.FileServer`

## 优势

1. **无本地文件访问限制**：不依赖浏览器的本地文件访问权限
2. **可分享**：可以将报告URL分享给团队成员查看
3. **统一访问方式**：所有报告都通过 HTTP 协议访问
4. **更好的兼容性**：避免了不同浏览器对 `file://` 协议的限制
