# SVN ä»£ç å®¡æ ¸å·¥å…·

ä¸€ä¸ªåŸºäº AI çš„ SVN ä»£ç å˜æ›´å®¡æ ¸å·¥å…·ï¼Œæ”¯æŒè‡ªåŠ¨æ£€æµ‹å˜æ›´å¹¶æä¾›æ”¹è¿›å»ºè®®ã€‚æä¾›å›¾å½¢ç•Œé¢å’Œå‘½ä»¤è¡Œä¸¤ç§ä½¿ç”¨æ–¹å¼ã€‚

## åŠŸèƒ½ç‰¹æ€§

- âœ… Web å›¾å½¢ç•Œé¢ï¼ˆGUIï¼‰å’Œå‘½ä»¤è¡Œï¼ˆCLIï¼‰åŒæ¨¡å¼
- âœ… **æœ¬åœ°æ¨¡å¼**ï¼šæ‰«ææœ¬åœ°å·¥ä½œç›®å½•çš„å˜æ›´æ–‡ä»¶
- âœ… **åœ¨çº¿æ¨¡å¼**ï¼šè¿æ¥SVNæœåŠ¡å™¨å®¡æ ¸å†å²ç‰ˆæœ¬ï¼ˆæ–°åŠŸèƒ½ï¼‰
- âœ… æ— éœ€å®‰è£…é¢å¤–ä¾èµ–ï¼Œçº¯ Go å®ç°
- âœ… è‡ªåŠ¨æ‰«æ SVN å·¥ä½œç›®å½•çš„å˜æ›´æ–‡ä»¶ï¼ˆåŒ…æ‹¬æ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤ï¼‰
- âœ… æ”¯æŒæœç´¢SVNæäº¤è®°å½•ï¼ˆæŒ‰è·¯å¾„ã€å…³é”®è¯ã€ä½œè€…ï¼‰
- âœ… æ”¯æŒé€‰æ‹©å¤šä¸ªç‰ˆæœ¬å’Œæ–‡ä»¶è¿›è¡Œå®¡æ ¸
- âœ… é›†æˆ AI æ¨¡å‹è¿›è¡Œæ™ºèƒ½ä»£ç å®¡æ ¸
- âœ… æ”¯æŒ OpenAI åè®®çš„æ¨¡å‹ï¼ˆOpenAIã€DeepSeek ç­‰ï¼‰
- âœ… å¯é…ç½®çš„å®¡æ ¸è§„åˆ™å’Œç³»ç»Ÿæç¤ºè¯
- âœ… ç”Ÿæˆ HTML æ ¼å¼çš„å®¡æ ¸æŠ¥å‘Š
- âœ… å®‰å…¨å­˜å‚¨SVNæœåŠ¡å™¨å‡­æ®
- âœ… æ˜“äºæ‰©å±•å…¶ä»– AI åè®®

## å®‰è£…

### å‰ç½®è¦æ±‚

- Go 1.21 æˆ–æ›´é«˜ç‰ˆæœ¬
- SVN å‘½ä»¤è¡Œå·¥å…·

### æ„å»º

Windows:
```bash
build.bat
```

æˆ–æ‰‹åŠ¨æ„å»ºï¼š
```bash
go mod tidy
go build -o svn-reviewer.exe
```

Linux/Mac:
```bash
go mod tidy
go build -o svn-reviewer
```

## é…ç½®

ç¼–è¾‘ `config.yaml` æ–‡ä»¶é…ç½® AI æ¨¡å‹å’Œå®¡æ ¸è§„åˆ™ï¼š

```yaml
ai:
  provider: "deepseek"  # æˆ– "openai"
  api_key: "your-api-key-here"
  base_url: "https://api.deepseek.com/v1"
  model: "deepseek-chat"
  temperature: 0.3
  max_tokens: 2000

review_prompt: |
  ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ä»£ç å®¡æ ¸ä¸“å®¶...
  ï¼ˆè‡ªå®šä¹‰å®¡æ ¸è§„åˆ™ï¼‰

svn:
  command: "svn"  # SVN å‘½ä»¤è·¯å¾„

# åœ¨çº¿æ¨¡å¼é…ç½®ï¼ˆå¯é€‰ï¼Œä½¿ç”¨--saveå‚æ•°åè‡ªåŠ¨ä¿å­˜ï¼‰
online:
  url: "https://svn.example.com/repo"
  username: "your_username"
  password: "your_password"

report:
  output_dir: "./reports"
  auto_open: true
```

## ä½¿ç”¨æ–¹æ³•

### Web GUI æ¨¡å¼ï¼ˆæ¨èï¼‰

ç›´æ¥åŒå‡» `svn-reviewer.exe` å¯åŠ¨ Web ç•Œé¢ï¼Œç¨‹åºä¼šè‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ `http://localhost:8080`ï¼š

#### æœ¬åœ°æ¨¡å¼ï¼ˆå®¡æ ¸æœ¬åœ°å˜æ›´ï¼‰
1. è‡ªåŠ¨åŠ è½½é…ç½®æ–‡ä»¶ï¼ˆé»˜è®¤ config.yamlï¼‰
2. è¾“å…¥ SVN å·¥ä½œç›®å½•ï¼ˆé»˜è®¤å½“å‰ç›®å½•ï¼‰
3. ç‚¹å‡»"æ‰«æå˜æ›´"æŒ‰é’®
4. åœ¨æ–‡ä»¶åˆ—è¡¨ä¸­é€‰æ‹©è¦å®¡æ ¸çš„æ–‡ä»¶ï¼ˆé»˜è®¤å…¨é€‰ï¼‰
5. ç‚¹å‡»"å¼€å§‹å®¡æ ¸"æŒ‰é’®
6. ç­‰å¾…å®¡æ ¸å®Œæˆï¼Œè‡ªåŠ¨ç”Ÿæˆå¹¶æ‰“å¼€ HTML æŠ¥å‘Š

#### åœ¨çº¿æ¨¡å¼ï¼ˆå®¡æ ¸å†å²ç‰ˆæœ¬ï¼‰
1. ç‚¹å‡»ç•Œé¢é¡¶éƒ¨çš„"åœ¨çº¿æ¨¡å¼"æŒ‰é’®åˆ‡æ¢
2. è¾“å…¥SVNæœåŠ¡å™¨åœ°å€ã€ç”¨æˆ·åã€å¯†ç 
3. ç‚¹å‡»"è¿æ¥æœåŠ¡å™¨"
4. è¾“å…¥æœç´¢æ¡ä»¶ï¼ˆè·¯å¾„ã€å…³é”®è¯ã€ä½œè€…ï¼‰
5. ç‚¹å‡»"æœç´¢"æŸ¥çœ‹æäº¤è®°å½•
6. å‹¾é€‰è¦å®¡æ ¸çš„ç‰ˆæœ¬ï¼Œç‚¹å‡»"åŠ è½½é€‰ä¸­ç‰ˆæœ¬çš„æ–‡ä»¶"
7. å‹¾é€‰è¦å®¡æ ¸çš„æ–‡ä»¶ï¼Œç‚¹å‡»"å¼€å§‹å®¡æ ¸"
8. ç­‰å¾…å®¡æ ¸å®Œæˆï¼Œè‡ªåŠ¨ç”Ÿæˆå¹¶æ‰“å¼€ HTML æŠ¥å‘Š

ç•Œé¢ç‰¹ç‚¹ï¼š
- ğŸ¨ ç°ä»£åŒ–çš„æ¸å˜è‰²è®¾è®¡
- ğŸ“± å“åº”å¼å¸ƒå±€ï¼Œæ”¯æŒå„ç§å±å¹•å°ºå¯¸
- ğŸ”„ å®æ—¶æ—¥å¿—è¾“å‡º
- âœ… æ–‡ä»¶çŠ¶æ€æ ‡è¯†ï¼ˆæ–°å¢/ä¿®æ”¹/åˆ é™¤ï¼‰
- ğŸŒ æ”¯æŒæœ¬åœ°å’Œåœ¨çº¿ä¸¤ç§æ¨¡å¼
- ğŸ” å¼ºå¤§çš„æœç´¢åŠŸèƒ½
- ğŸš€ ä¸€é”®æ“ä½œï¼Œç®€å•æ˜“ç”¨

### CLI æ¨¡å¼

#### æœ¬åœ°æ¨¡å¼

å®¡æ ¸å½“å‰ç›®å½•çš„æ‰€æœ‰å˜æ›´ï¼š

```bash
svn-reviewer review
```

æŒ‡å®šå·¥ä½œç›®å½•ï¼š

```bash
svn-reviewer review -d /path/to/svn/repo
```

é€‰æ‹©ç‰¹å®šæ–‡ä»¶å®¡æ ¸ï¼š

```bash
svn-reviewer review -f file1.go,file2.go
```

äº¤äº’å¼é€‰æ‹©æ–‡ä»¶ï¼š

```bash
svn-reviewer review -i
```

#### åœ¨çº¿æ¨¡å¼ï¼ˆæ–°åŠŸèƒ½ï¼‰

è¿æ¥SVNæœåŠ¡å™¨å®¡æ ¸å†å²ç‰ˆæœ¬ï¼š

```bash
# åŸºæœ¬ç”¨æ³•
svn-reviewer review online --url https://svn.example.com/repo --username your_name --password your_pass

# ä¿å­˜å‡­æ®
svn-reviewer review online --url https://svn.example.com/repo --username your_name --password your_pass --save

# ä½¿ç”¨ä¿å­˜çš„å‡­æ®
svn-reviewer review online

# æœç´¢ç‰¹å®šä½œè€…çš„æäº¤
svn-reviewer review online --author zhangsan

# æœç´¢åŒ…å«å…³é”®è¯çš„æäº¤
svn-reviewer review online --keyword "bug fix"

# æœç´¢ç‰¹å®šè·¯å¾„
svn-reviewer review online --path /trunk/src

# ç»„åˆæœç´¢
svn-reviewer review online --path /trunk --author zhangsan --keyword "feature"
```

#### ä½¿ç”¨è‡ªå®šä¹‰é…ç½®æ–‡ä»¶

```bash
svn-reviewer review --config custom-config.yaml
```

## ç¤ºä¾‹è¾“å‡º

```
æ­£åœ¨æ‰«æ SVN å˜æ›´...

æ£€æµ‹åˆ° 3 ä¸ªå˜æ›´æ–‡ä»¶:
  [1] [ä¿®æ”¹] src/main.go
  [2] [æ–°å¢] src/utils.go
  [3] [ä¿®æ”¹] README.md

å¼€å§‹å®¡æ ¸ 3 ä¸ªæ–‡ä»¶...

[1/3] æ­£åœ¨å®¡æ ¸: src/main.go
  âœ… å®¡æ ¸å®Œæˆ
  ------------------------------------------------------------
  å®¡æ ¸ç»“æœï¼š
  
  ä¸¥é‡ç¨‹åº¦ï¼šä¸­
  
  é—®é¢˜æè¿°ï¼š
  1. ç¼ºå°‘é”™è¯¯å¤„ç†...
  2. å˜é‡å‘½åä¸å¤Ÿæ¸…æ™°...
  
  æ”¹è¿›å»ºè®®ï¼š
  1. æ·»åŠ é€‚å½“çš„é”™è¯¯å¤„ç†...
  2. ä½¿ç”¨æ›´å…·æè¿°æ€§çš„å˜é‡å...
  ------------------------------------------------------------

æ‰€æœ‰æ–‡ä»¶å®¡æ ¸å®Œæˆï¼
```

## æ‰©å±•å…¶ä»– AI åè®®

è¦æ·»åŠ æ–°çš„ AI æä¾›å•†ï¼Œåªéœ€ï¼š

1. åœ¨ `internal/ai/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„å®¢æˆ·ç«¯å®ç°
2. å®ç° `Client` æ¥å£
3. åœ¨ `NewClient` å‡½æ•°ä¸­æ·»åŠ æ–°çš„ provider ç±»å‹

ç¤ºä¾‹ï¼š

```go
// internal/ai/custom.go
type CustomAIClient struct {
    // è‡ªå®šä¹‰å­—æ®µ
}

func (c *CustomAIClient) Review(ctx context.Context, fileName, diff, systemPrompt string) (*ReviewResult, error) {
    // å®ç°å®¡æ ¸é€»è¾‘
}
```

## é¡¹ç›®ç»“æ„

```
svn-code-reviewer/
â”œâ”€â”€ cmd/                    # å‘½ä»¤è¡Œæ¥å£
â”‚   â”œâ”€â”€ root.go            # æ ¹å‘½ä»¤
â”‚   â””â”€â”€ review.go          # å®¡æ ¸å‘½ä»¤
â”œâ”€â”€ gui/                   # å›¾å½¢ç•Œé¢
â”‚   â””â”€â”€ app.go            # GUI åº”ç”¨
â”œâ”€â”€ internal/              # å†…éƒ¨åŒ…
â”‚   â”œâ”€â”€ ai/               # AI å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ client.go     # å®¢æˆ·ç«¯æ¥å£
â”‚   â”‚   â”œâ”€â”€ openai.go     # OpenAI å®ç°
â”‚   â”‚   â””â”€â”€ types.go      # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ config/           # é…ç½®ç®¡ç†
â”‚   â”‚   â””â”€â”€ config.go
â”‚   â”œâ”€â”€ report/           # æŠ¥å‘Šç”Ÿæˆ
â”‚   â”‚   â””â”€â”€ html.go
â”‚   â””â”€â”€ svn/              # SVN æ“ä½œ
â”‚       â””â”€â”€ svn.go
â”œâ”€â”€ main.go               # ç¨‹åºå…¥å£
â”œâ”€â”€ config.yaml           # é…ç½®æ–‡ä»¶
â”œâ”€â”€ build.bat             # Windows æ„å»ºè„šæœ¬
â””â”€â”€ go.mod               # Go æ¨¡å—å®šä¹‰
```

## è®¸å¯è¯

MIT
